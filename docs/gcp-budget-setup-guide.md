# 🛡️ GCP無料枠保護 - 予算設定ガイド

## 📋 **推奨設定値**

### **1. 範囲・名前**
```
名前: "4DXatHOME-Safety-Budget"
説明: "無料枠保護用の安全予算"
```

### **2. 期間設定**
```
✅ 月別 を選択
✅ 月の開始日: 1日（デフォルト）
理由: 毎月リセットされ、無料枠と同期
```

### **3. プロジェクト設定**
```
✅ プロジェクト ユーザーの読み取り専用: ON
✅ プロジェクト: fourdk-home-2024 のみ選択
✅ サービス: すべてのサービス（1798）
理由: 全サービスを監視し、意図しない変更を防止
```

### **4. コスト削減設定**
```
✅ コスト削減プログラム: ON
✅ その他のコスト削減: ON  
理由: 無料クレジット適用後の実際の課金額を追跡
```

### **5. 金額設定（重要！）**
```
予算額: $3.00 USD/月
理由: 
- 無料枠 $0 + 安全バッファー $3
- $300無料クレジット内
- 早期警告で安全性確保
```

## 🚨 **アラート設定（現在の画面）**

### **⚠️ 現在の設定は危険！**
```
現在: ¥30,000 ($200) 予算設定
これは無料枠を大幅に超えています！
```

### **🛡️ 推奨修正値**
```
予算の割合1: 50%  → 金額: ¥450 ($3.00の50%)
予算の割合2: 90%  → 金額: ¥810 ($3.00の90%)  
予算の割合3: 100% → 金額: ¥900 ($3.00の100%)
```

### **通知設定**
```
✅ メール通知: kumesoki@gmail.com
✅ プロジェクト停止: 100%で自動停止（推奨）
✅ 課金アカウント無効化: 110%で設定
```

## 📊 **4DXatHOME 予想使用量**

### **Cloud Run（FastAPI）**
```
予想リクエスト数: 10,000/月（無料枠2,000,000の0.5%）
予想CPU時間: 1,000秒/月（無料枠180,000の0.5%）
予想費用: $0.00（完全に無料枠内）
```

### **Container Registry**
```
イメージサイズ: 250MB（無料枠0.5GBの50%）
予想費用: $0.00（無料枠内）
```

### **Cloud Build**
```
ビルド時間: 月10分（無料枠3,600分の0.3%）
予想費用: $0.00（無料枠内）
```

**合計予想費用: $0.00/月（完全無料枠内）**

## 🔧 **設定手順**

### **現在の画面での入力**
1. **名前**: `4DXatHOME-Safety-Budget`
2. **期間**: `月別` を選択（そのまま）
3. **プロジェクト**: `fourdk-home-2024` が選択されていることを確認
4. **サービス**: `すべてのサービス` のまま
5. **コスト削減**: 両方 ✅ にチェック
6. **金額**: `$3.00` を入力

### **「続行」クリック後の設定**
- アラート設定画面に進む
- 50%, 90%, 100%, 110% の閾値設定
- メール通知とプロジェクト停止設定

## ⚠️ **安全性チェック**

### **設定前確認事項**
- [ ] 無料試用版($300クレジット)が有効
- [ ] 自動課金が無効になっている
- [ ] プロジェクトが fourdk-home-2024 に限定
- [ ] 予算額が $3.00 以下

### **緊急時対応**
```bash
# プロジェクト一時停止
gcloud services disable run.googleapis.com

# 緊急時プロジェクト削除
gcloud projects delete fourdk-home-2024
```

---

## 🎯 **今すぐやること**

**上記の設定値で予算を作成してください：**
- 名前: `4DXatHOME-Safety-Budget`
- 金額: `$3.00 USD`
- その他の設定はデフォルト（読み取り専用、全サービス、コスト削減ON）

設定完了後、「続行」をクリックしてアラート設定に進みましょう！