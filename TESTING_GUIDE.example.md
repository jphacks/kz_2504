# 4DX@HOME ãƒ‡ãƒã‚¤ã‚¹ãƒ†ã‚¹ãƒˆé€šä¿¡ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¤œè¨¼ã‚¬ã‚¤ãƒ‰

> **âš ï¸ æ³¨æ„**: ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§ã™ã€‚å®Ÿéš›ã®Cloud Run URLã¯ `TESTING_GUIDE.md` ã«è¨˜è¼‰ã•ã‚Œã¦ã„ã¾ã™ãŒã€ãã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯ `.gitignore` ã«ã‚ˆã‚Šé™¤å¤–ã•ã‚Œã¦ã„ã¾ã™ã€‚

## ğŸ“‹ æ¦‚è¦

ã“ã®ã‚¬ã‚¤ãƒ‰ã§ã¯ã€ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¨ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢é–“ã®é€šä¿¡ãŒ **å¿…ãšCloud Run APIã‚µãƒ¼ãƒãƒ¼ã‚’çµŒç”±** ã™ã‚‹ã“ã¨ã‚’æ¤œè¨¼ã—ã¾ã™ã€‚

## ğŸ—ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  debug_frontend â”‚         â”‚  Cloud Run API       â”‚         â”‚  debug_hardware â”‚
â”‚  (React)        â”‚         â”‚  (FastAPI)           â”‚         â”‚  (Flask)        â”‚
â”‚                 â”‚         â”‚                      â”‚         â”‚                 â”‚
â”‚  localhost:5173 â”‚         â”‚  asia-northeast1     â”‚         â”‚  localhost:5000 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                            â”‚                              â”‚
        â”‚ 1. ãƒ‡ãƒã‚¤ã‚¹ãƒ†ã‚¹ãƒˆè¦æ±‚     â”‚                              â”‚
        â”‚ POST /api/device/test      â”‚                              â”‚
        â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                              â”‚
        â”‚                            â”‚                              â”‚
        â”‚                            â”‚ 2. WebSocketé€ä¿¡             â”‚
        â”‚                            â”‚ type: device_test            â”‚
        â”‚                            â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
        â”‚                            â”‚                              â”‚
        â”‚                            â”‚                              â”‚ 3. ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
        â”‚                            â”‚                              â”‚    âœ… 5ãƒ‡ãƒã‚¤ã‚¹
        â”‚                            â”‚                              â”‚
        â”‚                            â”‚ 4. WebSocketå¿œç­”             â”‚
        â”‚                            â”‚ type: device_test_result     â”‚
        â”‚                            â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
        â”‚                            â”‚                              â”‚
        â”‚ 5. HTTP ãƒ¬ã‚¹ãƒãƒ³ã‚¹        â”‚                              â”‚
        â”‚ {device_response: {...}}   â”‚                              â”‚
        â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                              â”‚
```

## ğŸš€ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †

### 1. Cloud Run APIã‚µãƒ¼ãƒãƒ¼ç¢ºèª

æœ€æ–°ã®ãƒ‡ãƒ—ãƒ­ã‚¤çŠ¶æ³ã‚’ç¢ºèª:

```powershell
# ã‚µãƒ¼ãƒ“ã‚¹æƒ…å ±ç¢ºèª
gcloud run services describe fdx-home-backend-api --region=asia-northeast1

# ç¾åœ¨ã®ãƒªãƒ“ã‚¸ãƒ§ãƒ³ã¨URLã‚’ç¢ºèª
gcloud run services describe fdx-home-backend-api --region=asia-northeast1 --format="value(status.url)"
```

### 2. ç’°å¢ƒå¤‰æ•°ã®è¨­å®š

å„ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã® `.env` ãƒ•ã‚¡ã‚¤ãƒ«ã«å®Ÿéš›ã®Cloud Run URLã‚’è¨­å®šã—ã¦ãã ã•ã„:

**debug_hardware/.env**:
```
CLOUD_RUN_API_URL=https://your-backend-api-XXXXXXXXXX.asia-northeast1.run.app
```

**debug_frontend/.env**:
```
VITE_BACKEND_API_URL=https://your-backend-api-XXXXXXXXXX.asia-northeast1.run.app
```

### 3. ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿èµ·å‹•

```powershell
cd debug_hardware
python app.py
```

### 4. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰èµ·å‹•

```powershell
cd debug_frontend
npm run dev
```

**ã‚¢ã‚¯ã‚»ã‚¹**: http://localhost:5173

## ğŸ§ª ãƒ†ã‚¹ãƒˆã‚·ãƒŠãƒªã‚ª

è©³ç´°ãªãƒ†ã‚¹ãƒˆæ‰‹é †ã¯å®Ÿéš›ã® `TESTING_GUIDE.md` ã‚’å‚ç…§ã—ã¦ãã ã•ã„ï¼ˆGité™¤å¤–ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰ã€‚

## âœ… æ¤œè¨¼ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### å¿…é ˆæ¤œè¨¼é …ç›®

- [ ] debug_hardwareãŒCloud Run WebSocketã«è‡ªå‹•æ¥ç¶šã™ã‚‹
- [ ] ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‹ã‚‰ã®ãƒ‡ãƒã‚¤ã‚¹ãƒ†ã‚¹ãƒˆãŒCloud Run APIçµŒç”±ã§å®Ÿè¡Œã•ã‚Œã‚‹
- [ ] ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ãŒãƒ†ã‚¹ãƒˆå®Ÿè¡Œå¾Œã€WebSocketçµŒç”±ã§çµæœã‚’è¿”ã™
- [ ] Cloud Run APIãŒå¿œç­”ã‚’å—ä¿¡ã—ã¦ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã«è¿”ã™
- [ ] ç›´æ¥ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆï¼ˆ/timeline/upload, /sync/processï¼‰ãŒ410ã‚¨ãƒ©ãƒ¼ã‚’è¿”ã™

### ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£éµå®ˆç¢ºèª

- [ ] ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¯localhost:5000ã«ç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹ã—ãªã„
- [ ] ã™ã¹ã¦ã®APIå‘¼ã³å‡ºã—ãŒCloud RunçµŒç”±
- [ ] WebSocketé€šä¿¡ã‚‚Cloud RunçµŒç”±
- [ ] ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ã¯Cloud Runã‹ã‚‰ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ã¿å‡¦ç†

## ğŸ” ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### Cloud Run URLã®ç¢ºèª

```powershell
# ã‚µãƒ¼ãƒ“ã‚¹URLå–å¾—
gcloud run services describe fdx-home-backend-api --region=asia-northeast1 --format="value(status.url)"
```

### ãƒ­ã‚°ã®ç¢ºèª

```powershell
# Cloud Runãƒ­ã‚°ç¢ºèª
gcloud run services logs read fdx-home-backend-api --region=asia-northeast1 --limit=20
```

---

**æœ€çµ‚æ›´æ–°**: 2025å¹´11æœˆ7æ—¥  
**ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0
