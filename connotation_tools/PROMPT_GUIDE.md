# プロンプト追加ガイド

## 📋 目次

1. [プロンプトを追加する方法](#プロンプトを追加する方法)
2. [プロンプトの仕様とルール](#プロンプトの仕様とルール)
3. [プロンプト作成のベストプラクティス](#プロンプト作成のベストプラクティス)
4. [使用例](#使用例)
5. [コマンド一覧](#コマンド一覧)

---

## 🎯 プロンプトを追加する方法

### 方法1: `prompts.py`を直接編集（推奨）

1. `prompts.py` を開く
2. `PROMPTS` 辞書に新しいエントリを追加

```python
PROMPTS = {
    # 既存のプロンプト...
    
    "my_new_prompt": """
    ここに新しいプロンプトを記載
    {num_frames} でフレーム数が自動置換されます
    """,
}
```

3. 保存して完了

### 方法2: コマンドラインから追加

```bash
python prompts.py add my_prompt "プロンプトテキスト"
```

**注意**: この方法は一時的な追加のみで、ファイルには保存されません。

---

## 📐 プロンプトの仕様とルール

### 必須の仕様

#### 1. **JSON形式での出力指定**

プロンプトの最後に必ず以下の形式で出力指定を含める必要があります：

```
出力は必ずJSONオブジェクトで、キー 'captions' に配列形式でキャプションのリストを含むこと。
例: {"captions": ["キャプション1", "キャプション2", ...]}
```

**重要**: 
- `{"captions": [...]}` の形式で出力される必要があります
- 配列の要素数は、入力フレーム数と一致する必要があります

#### 2. **フレーム数の指定**

プロンプト内で `{num_frames}` を使用すると、実行時に自動的にフレーム数に置き換えられます。

例：
```
以下の{num_frames}枚の動画フレームを順番に解析してください。
```
→ 実行時: `以下の15枚の動画フレームを順番に解析してください。`

#### 3. **プロンプト名の規則**

- **英数字とアンダースコアのみ使用可能**
- スペースや特殊文字は使用不可
- 例: `my_prompt`, `action_v2`, `custom_1` ✅
- 例: `my prompt`, `action-v2`, `カスタム` ❌

### 推奨されるルール

#### 1. **4DX効果の判定ポイントを含める**

プロンプトには、以下のような4DX効果に関連するキーワードを検出する指示を含めることを推奨します：

- **乗り物**: 「乗っている」「運転中」「飛行中」
- **爆発**: 「爆発」「炸裂」「閃光」「炎」「煙」
- **衝突**: 「衝突」「激突」「打撃」「攻撃」
- **動き**: 「移動中」「走行中」「戦闘中」
- **静止**: 本当に静止している場合のみ「静止」

#### 2. **日本語での出力を指定**

```
各フレームについて、日本語で詳細なキャプション（2-3文）を返してください。
```

#### 3. **キャプションの長さを指定**

- 簡潔: `1-2文`
- 標準: `2-3文`
- 詳細: `3-5文`

#### 4. **目的を明確に記載**

```
これは4DX映画館のような体感型エンターテインメント用です。
```

---

## 💡 プロンプト作成のベストプラクティス

### 1. **構造化されたプロンプト**

プロンプトをセクションに分けて整理すると、AIが理解しやすくなります：

```
【セクション1: 基本指示】
...

【セクション2: 詳細な要件】
...

【セクション3: 出力形式】
...
```

### 2. **具体例を含める**

具体例を示すことで、AIが期待する出力を理解しやすくなります：

```
例: 「戦闘機に乗っており、飛行中」
例: 「背景で爆発が起き、炎と煙が上がっている」
```

### 3. **チェックリスト形式**

✓ マークを使って、重要なポイントを明確に：

```
✓ 炎が見える → 「炎が見える」と明記
✓ 火花が散る → 「火花が散っている」と明記
✓ 爆発の瞬間 → 「爆発している」と明記
```

### 4. **禁止事項を明記**

何を**しない**べきかも明確に：

```
✓ 本当に何も動いていない場合のみ「静止」
✓ 少しでも動きがあれば「動いている」
```

### 5. **エスケープ文字に注意**

JSONの例を含む場合、`{` と `}` をエスケープする必要があります：

```python
# 正しい例
"例: {{"captions": [...]}}"

# 間違った例（エラーになる）
"例: {"captions": [...]}"
```

---

## 📝 使用例

### 例1: 基本的なプロンプト

```python
PROMPTS = {
    "basic": """
以下の{num_frames}枚の動画フレームを順番に解析してください。
各フレームについて、日本語で簡潔なキャプション（1-2文）を返してください。

出力は必ずJSONオブジェクトで、キー 'captions' に配列形式でキャプションのリストを含むこと。
例: {{"captions": ["キャプション1", "キャプション2", ...]}}
""",
}
```

### 例2: 詳細なプロンプト

```python
PROMPTS = {
    "detailed_analysis": """
以下の{num_frames}枚の動画フレームを順番に解析してください。
これは4DX映画館のような体感型エンターテインメント用です。

【解析要件】
1. 各フレームについて、日本語で非常に詳細なキャプション（3-5文）を返してください。
2. 以下の要素を必ず含めてください：
   - 人物・キャラクターの状態
   - 背景・環境の描写
   - 動き・動作の詳細
   - 視覚効果（光、色、影）
   - 感情・雰囲気

【4DX効果の判定】
- 乗り物に乗っている場合は必ず「乗っている」と記載
- 爆発や衝突は「爆発」「衝突」と明記
- 動きがある場合は「移動中」「戦闘中」などと記載

出力は必ずJSONオブジェクトで、キー 'captions' に配列形式でキャプションのリストを含むこと。
例: {{"captions": ["詳細なキャプション1", "詳細なキャプション2", ...]}}
""",
}
```

### 例3: 特定のジャンル向けプロンプト

```python
PROMPTS = {
    "horror_focused": """
以下の{num_frames}枚の動画フレームを順番に解析してください。
ホラー・サスペンス映画向けの解析を行ってください。

【ホラー特化解析】
- 恐怖要素（怪物、暗闇、不気味な音）を重点的に記載
- 緊張感の高まりを詳細に描写
- 視覚的な恐怖要素（血、影、不気味な動き）を明記
- 感情（恐怖、不安、緊張）を強調

【4DX効果の判定】
- 恐怖シーンは「恐怖」「恐ろしい」と記載（振動: heartbeat）
- 突然の出現は「突然現れる」「驚き」と記載（振動: strong）
- 静かなシーンは「静か」「不気味な静寂」と記載

出力は必ずJSONオブジェクトで、キー 'captions' に配列形式でキャプションのリストを含むこと。
例: {{"captions": ["ホラーキャプション1", "ホラーキャプション2", ...]}}
""",
}
```

---

## 🔧 プロンプトのテスト方法

### 1. プロンプトの内容を確認

```bash
python prompts.py show my_prompt
```

### 2. プロンプトを使用して解析

`analyze_video_gemini.py` の58行目を編集：

```python
PROMPT_NAME = "my_prompt"
```

### 3. 実行して結果を確認

```bash
python analyze_video_gemini.py demo用動画案１.mp4
```

---

## ⚠️ 注意事項

### 1. **JSON形式の必須性**

プロンプトの最後に必ずJSON形式での出力指定を含める必要があります。これを忘れると、AIが正しい形式で出力しない可能性があります。

### 2. **フレーム数の一致**

出力されるキャプションの数は、入力フレーム数と一致する必要があります。不一致の場合、エラーが発生する可能性があります。

### 3. **エスケープ文字**

Pythonの文字列内で `{` や `}` を使用する場合、JSONの例では `{{` と `}}` のようにエスケープが必要です。

### 4. **プロンプトの長さ**

非常に長いプロンプトは、APIのトークン制限に達する可能性があります。適度な長さに保つことを推奨します。

---

## 📚 既存のプロンプト一覧

`prompts.py` には以下の8つのプロンプトパターンが用意されています：

1. `default` - 標準プロンプト（デフォルト）
2. `detailed` - 詳細解析モード
3. `simple` - 簡潔モード
4. `action_focused` - アクション特化
5. `emotion_focused` - 感情・雰囲気特化
6. `custom_1` - カスタムプロンプト1（編集可能）
7. `custom_2` - カスタムプロンプト2（編集可能）
8. `4dx_home` - 4DX@HOMEシステム用（効果判定付き）

以下に各プロンプトの完全な内容を記載します。

---

### 1. `default` - 標準プロンプト（デフォルト）

```text
以下の{num_frames}枚の動画フレームを順番に解析してください。
これは4DX映画館のような体感型エンターテインメント用です。
各フレームについて、日本語で詳細なキャプション（2-3文）を返してください。

【4DX体験のための超重要ポイント - 振動を積極的に！】

★ 振動の基本方針 ★
- 乗り物に乗っている間は常に「乗っている」と記載
- 動きや戦闘があるシーンは基本的に振動を出す
- 完全に静止しているシーン以外は何かしら動いている

1. 【乗り物搭乗の判定】最重要！
   ✓ 戦闘機/車/船/ロボット/馬に「乗っている」と必ず記載
   ✓ コックピット内/運転席/操縦席 → 「乗っている」
   ✓ 降りている場合のみ「降りている」と記載
   例: 「戦闘機に乗っており、飛行中」
   例: 「車内で運転しており、走行中」

2. 【爆発・炎・火花】見逃し厳禁！
   ✓ 炎が見える → 「炎が見える」と明記
   ✓ 火花が散る → 「火花が散っている」と明記
   ✓ 爆発の瞬間 → 「爆発している」と明記
   ✓ 爆風・煙・閃光も詳しく記載
   例: 「背景で爆発が起き、炎と煙が上がっている」

3. 【衝突・攻撃の瞬間】
   ✓ 物体がぶつかる瞬間 → 「衝突」と明記
   ✓ 武器が当たる瞬間 → 「打撃」と明記
   例: 「ロボットの拳が敵に当たる瞬間」

4. 【激しい動き・戦闘】
   ✓ 戦闘中/バトル中 → 「戦闘中」と明記
   ✓ 暴れている/激しく動く → 「激しく動いている」
   ✓ 急旋回/急加速 → 明記

5. 【視覚効果】
   ✓ 雷 → 「雷」、稲妻 → 「稲妻」
   ✓ 爆発の光 → 「爆発の閃光」
   ✓ 水しぶき/唾 → 「水しぶき」

6. 【静止の判定】
   ✓ 本当に何も動いていない場合のみ「静止」
   ✓ 少しでも動きがあれば「動いている」

出力は必ずJSONオブジェクトで、キー 'captions' に配列形式でキャプションのリストを含むこと。
例: {"captions": ["キャプション1", "キャプション2", ...]}
```

---

### 2. `detailed` - 詳細解析モード

```text
以下の{num_frames}枚の動画フレームを順番に解析してください。
これは4DX映画館のような体感型エンターテインメント用です。
各フレームについて、日本語で非常に詳細なキャプション（3-5文）を返してください。

【超詳細解析モード】

★ 詳細に記載すべき要素 ★
1. 人物・キャラクターの状態（表情、動作、位置）
2. 背景・環境の描写（天候、時間帯、場所）
3. 動き・動作の詳細（速度、方向、強度）
4. 視覚効果（光、色、影、煙、火花）
5. 音が聞こえそうな要素（爆発、衝突、叫び）
6. 感情・雰囲気（緊張、興奮、恐怖、安らぎ）

【4DX効果の判定ポイント】
- 乗り物: 必ず「乗っている」「運転中」「飛行中」などと記載
- 爆発: 「爆発」「炸裂」「閃光」「炎」「煙」を明記
- 衝突: 「衝突」「激突」「打撃」「攻撃」を明記
- 動き: 「移動中」「走行中」「戦闘中」を明記
- 静止: 本当に静止している場合のみ「静止」と記載

出力は必ずJSONオブジェクトで、キー 'captions' に配列形式でキャプションのリストを含むこと。
例: {"captions": ["詳細なキャプション1", "詳細なキャプション2", ...]}
```

---

### 3. `simple` - 簡潔モード

```text
以下の{num_frames}枚の動画フレームを順番に解析してください。
各フレームについて、日本語で簡潔なキャプション（1-2文）を返してください。

【簡潔モード】
- シーンの主要な要素のみを記載
- 動きや効果を簡潔に表現
- 4DX効果に関連するキーワードを含める

出力は必ずJSONオブジェクトで、キー 'captions' に配列形式でキャプションのリストを含むこと。
例: {"captions": ["キャプション1", "キャプション2", ...]}
```

---

### 4. `action_focused` - アクション特化

```text
以下の{num_frames}枚の動画フレームを順番に解析してください。
これは4DX映画館のような体感型エンターテインメント用です。
アクションシーンに特化した解析を行ってください。

【アクション特化モード】

★ 重点的に記載すべき要素 ★
1. 戦闘・格闘の詳細（攻撃、防御、回避）
2. 爆発・衝突の瞬間（タイミング、強度、範囲）
3. 高速移動（飛行、走行、ジャンプ）
4. 武器・道具の使用（発射、命中、効果）
5. 環境の変化（破壊、変形、崩壊）

【4DX効果の判定（アクション重視）】
- 戦闘中は必ず「戦闘中」「バトル中」と記載
- 爆発は「爆発」「炸裂」と明記
- 衝突は「衝突」「激突」と明記
- 高速移動は「高速で移動」「疾走」と明記
- 武器使用は「発射」「命中」と明記

出力は必ずJSONオブジェクトで、キー 'captions' に配列形式でキャプションのリストを含むこと。
例: {"captions": ["アクションキャプション1", "アクションキャプション2", ...]}
```

---

### 5. `emotion_focused` - 感情・雰囲気特化

```text
以下の{num_frames}枚の動画フレームを順番に解析してください。
これは4DX映画館のような体感型エンターテインメント用です。
感情・雰囲気に重点を置いた解析を行ってください。

【感情・雰囲気特化モード】

★ 重点的に記載すべき要素 ★
1. キャラクターの感情（恐怖、興奮、緊張、安らぎ）
2. シーンの雰囲気（暗い、明るい、不穏、平和）
3. 緊張感の高まり（ドキドキ、不安、期待）
4. 感情の変化（驚き、安堵、絶望、希望）
5. 環境が与える印象（圧迫感、開放感、神秘性）

【4DX効果の判定（感情重視）】
- 緊張シーンは「緊張」「ドキドキ」「不安」と記載
- 恐怖シーンは「恐怖」「恐ろしい」と記載
- 興奮シーンは「興奮」「高揚」と記載
- 静かなシーンは「静か」「穏やか」と記載（振動なし）

出力は必ずJSONオブジェクトで、キー 'captions' に配列形式でキャプションのリストを含むこと。
例: {"captions": ["感情キャプション1", "感情キャプション2", ...]}
```

---

### 6. `custom_1` - カスタムプロンプト1

```text
以下の{num_frames}枚の動画フレームを順番に解析してください。
カスタムプロンプト1です。ここを編集して独自のプロンプトを作成できます。

【カスタムプロンプト1】
- ここに独自の指示を記載
- プロンプトを自由に編集可能

出力は必ずJSONオブジェクトで、キー 'captions' に配列形式でキャプションのリストを含むこと。
例: {"captions": ["キャプション1", "キャプション2", ...]}
```

---

### 7. `custom_2` - カスタムプロンプト2

```text
以下の{num_frames}枚の動画フレームを順番に解析してください。
カスタムプロンプト2です。ここを編集して独自のプロンプトを作成できます。

【カスタムプロンプト2】
- ここに独自の指示を記載
- プロンプトを自由に編集可能

出力は必ずJSONオブジェクトで、キー 'captions' に配列形式でキャプションのリストを含むこと。
例: {"captions": ["キャプション1", "キャプション2", ...]}
```

---

### 8. `4dx_home` - 4DX@HOMEシステム用（効果判定付き）

```text
以下の{num_frames}枚の動画フレームを順番に解析してください。
これは4DX@HOMEシステム用の解析です。0.25秒間隔で切り取られた連続フレームです。

【重要】前後のフレームの差分をしっかり見て、変化を検出してください。

各フレームについて、以下の2つを返してください：
1. 日本語での詳細なキャプション（2-3文）
2. 4DX効果の判定（JSON形式）

【4DX効果の種類】

★ 光（flash）★
- "steady": 点灯（継続的な光）※特別光を表現する必要があるときのみ
- "slow_blink": 遅い点滅（ゆっくりチカチカ）※特別光を表現する必要があるときのみ
- "fast_blink": 早い点滅（速くチカチカ）※特別光を表現する必要があるときのみ
- 通常のシーンでは光は使わない。銃の火、閃光、爆発、雷など、特別な光を表現する必要があるときだけ使用する

★ 色（color）★
- "red": 赤
- "green": 緑
- "blue": 青
- "yellow": 黄色
- "cyan": シアン
- "purple": 紫

★ 振動（vibration）★
- "up_strong": 上の強（背中に来る振動）※強烈なシーンのみ
- "up_mid_strong": 上の中強（背中に来る振動）※強烈なシーンのみ
- "up_mid_weak": 上の中弱（背中に来る振動）※多少の振動を再現
- "up_weak": 上の弱（背中に来る振動）※多少の振動を再現
- "down_strong": 下の強（おしりに来る振動）※強烈なシーンのみ
- "down_mid_strong": 下の中強（おしりに来る振動）※強烈なシーンのみ
- "down_mid_weak": 下の中弱（おしりに来る振動）※多少の振動を再現
- "down_weak": 下の弱（おしりに来る振動）※多少の振動を再現
- "up_down_strong": 上＆下同時: 強（背中とおしりが同時、相乗効果で強い）
- "up_down_mid_strong": 上＆下同時: 中強（背中とおしりが同時、相乗効果で強い）
- "up_down_mid_weak": 上＆下同時: 中弱（背中とおしりが同時、相乗効果で強い。ただし単独の"up_mid_strong"よりは弱い）
- "up_down_weak": 上＆下同時: 弱（背中とおしりが同時、相乗効果で強い。ただし単独の"up_mid_strong"よりは弱い）
- "heartbeat": ドキドキ

★ 水しぶき（water）★
- "on": オン

★ 風（wind）★
- "on": オン

【4DXプロとしての判定ルール】

① 銃の火・閃光・発射
- 銃の先から火が出た瞬間 → 光: fast_blink（一瞬だけ）、振動: up_strong または up_mid_strong（発射の衝撃）
- 次に火が出たら再び光、すぐ消す
- 発射物（銃弾、ミサイル、ロケットなど）が発射される瞬間 → 光: fast_blink（一瞬）、振動: up_strong または up_mid_strong（発射の衝撃）
- 発射物が着弾する瞬間 → 振動: down_strong または up_down_strong（着弾の衝撃）
- 発射と着弾の両方に強い衝撃を付ける

② 爆破
- 爆発の直前（0.25-0.5秒前） → 効果を停止（静寂を作る）
- 爆発の瞬間 → 光: fast_blink（一瞬）、風: on（1秒程度）、振動: down_strong または up_down_strong（強烈な爆発の瞬間のみ）

③ 車・乗り物
- 走っている間 → 振動: down_mid_weak または down_weak（継続、車の大きさ・速さ・激しさで調整。中強以上は使わない）
- ジャンプして空中に浮いた瞬間 → 振動: なし（メリハリを付ける）
- 着地の瞬間 → 振動: down_strong または down_mid_strong（強烈な着地の瞬間のみ）

④ 水に飛び込む
- 水に入る直前まで → 水: なし（画面に水が写っていても停止）
- 着水の瞬間 → 水: on

⑤ 雨
- 雨のシーン → 水: on（数秒に1回程度、ずっと出し続けない）

⑥ 戦闘・パンチ
- パンチが当たる直前（0.25秒前） → 効果を停止（静寂を作る）
- パンチが当たった瞬間 → 振動: up_strong または up_mid_strong（強烈な衝撃の瞬間のみ）
- 軽いパンチやタップ → 振動: up_mid_weak または up_weak（多少の振動）

⑦ クラブ・パーティー
- クラブシーン → 色: 1コマずつローテーション（赤→緑→青→黄色→シアン→紫→...）

⑧ 空を飛ぶ
- 飛行中 → 風: on（必要なシーンでは積極的に使用）

⑨ ホラー・恐竜・怪物
- 敵・恐竜・怪物が近づいている間 → 振動: heartbeat（シーンが切り替わるまで継続）
- 敵・恐竜・怪物が出てくる直前（0.25-0.5秒前） → 効果を停止（静寂を作る）
- 敵・恐竜・怪物が出てきた瞬間 → 風: on（1秒程度）、振動: down_strong（映像に同期）
- シーンが切り替わったら heartbeat を停止

⑩ 恋愛
- 映像に合わせて色を変化（2-3秒程度ゆっくり）
- 最高潮のシーン → 振動: heartbeat

⑪ 吹雪
- 水: on（たまに）、風: on（必要なシーンでは積極的に使用）

【判定のポイント】
- 前後のフレームの差分をしっかり見る
- 映像に同期させる（0.25秒間隔なので、変化を正確に検出）
- 振動は0.5秒以上継続（時には0.25秒でも可）
- **光の使用ルール**：光は特別光を表現する必要があるときだけ使う。銃の火、閃光、爆発、雷、ライトなど、特別な光を表現する必要があるときのみ使用。通常のシーンでは光は使わない
- **振動の強度ルール**：
  - 中強以上（up_mid_strong, up_strong, down_mid_strong, down_strong）は、強烈なシーン（爆発、強烈な衝撃、強烈な着地など）でのみ使用
  - 多少の振動を再現する場合は、中弱以下（up_mid_weak, up_weak, down_mid_weak, down_weak）を使用
  - 上＆下同時（up_down_*）は相乗効果で強くなるが、単独の中強よりは弱い。例：up_down_mid_weak < up_mid_strong
- **振動のメリハリ**：振動は極端にわかりやすく再現する。静かなシーンでは完全に停止させ、動きのあるシーンで明確に再開する。曖昧な中間状態は避ける
- **振動の停止も演出の一部**：静かなシーンでは振動を停止させ、動きのあるシーンで再開することで、コントラストが生まれ、より効果的な演出になる
- **ホラー・恐竜・怪物シーン**：敵・恐竜・怪物が近づいている間は heartbeat を継続し、シーンが切り替わるまで続ける。シーンが切り替わったら停止する
- **発射と着弾の衝撃**：銃弾、ミサイル、ロケットなどが発射される瞬間と着弾する瞬間の両方に強い衝撃（振動）を付ける。発射の瞬間は up_strong または up_mid_strong、着弾の瞬間は down_strong または up_down_strong
- **強烈なシーンの直前の静寂**：爆発、パンチ、衝撃、敵の出現など、強烈なシーンの直前（0.25-0.5秒前）には効果を停止して静寂を作る。これにより、その後の効果がより強く感じられる。例：爆発の直前→効果停止→爆発の瞬間→強烈な効果
- 光・色は2-3秒程度ゆっくり変化（人間が感知できるように）
- **各効果の使用時間制限**：各効果（光、色、振動、風、水）は、全フレームの3分の2（約66.7%）を超えないようにする。必要なシーンでは積極的に使用するが、常に動かし続けない。静と動のコントラストを意識する
- 4DXとして自然で、わかりやすい演出を心がける
- 人間が感動できるくらい余裕をもって演出

【出力形式】
必ずJSONオブジェクトで、以下の形式で返してください：

{
  "frames": [
    {
      "caption": "フレーム1のキャプション",
      "effects": {
        "flash": "fast_blink" または null,
        "color": "red" または null,
        "vibration": "down_strong" または null,
        "water": "on" または null,
        "wind": "on" または null
      }
    },
    {
      "caption": "フレーム2のキャプション",
      "effects": {...}
    },
    ...
  ]
}

効果がない場合は null を返してください。

【重要】振動の選択について：
- 背中に来る振動が必要な場合 → "up_strong", "up_mid_strong", "up_mid_weak", "up_weak" のいずれか
- おしりに来る振動が必要な場合 → "down_strong", "down_mid_strong", "down_mid_weak", "down_weak" のいずれか
- 背中とおしりが同時に振動が必要な場合（かなり強い振動） → "up_down_strong", "up_down_mid_strong", "up_down_mid_weak", "up_down_weak" のいずれか
- シーンに応じて適切な強度を選択してください
```

---

これらを参考にして、独自のプロンプトを作成してください。

---

## 🎯 まとめ

1. ✅ `prompts.py` の `PROMPTS` 辞書に追加
2. ✅ JSON形式での出力指定を必ず含める
3. ✅ `{num_frames}` でフレーム数を指定
4. ✅ 4DX効果の判定ポイントを含める
5. ✅ 具体例とチェックリストを使用
6. ✅ エスケープ文字に注意

**🎉 これで独自のプロンプトを作成できます！**

---

## 🖥️ コマンド一覧

このプロジェクトで使用可能なすべてのコマンドを種類別にまとめています。

### 📝 プロンプト管理コマンド (`prompts.py`)

プロンプトの管理を行うコマンドです。

#### 1. **プロンプト一覧表示**
```bash
python prompts.py list
```
- **種類**: 情報表示コマンド
- **説明**: 利用可能なすべてのプロンプト名を一覧表示します
- **出力**: プロンプト名のリスト（デフォルトプロンプトには「(デフォルト)」マークが付きます）

#### 2. **プロンプト内容表示**
```bash
python prompts.py show [プロンプト名]
```
- **種類**: 情報表示コマンド
- **説明**: 指定したプロンプトの内容を表示します
- **引数**: 
  - `[プロンプト名]` (オプション): 表示するプロンプト名。省略時はデフォルトプロンプトを表示
- **例**: 
  ```bash
  python prompts.py show detailed
  python prompts.py show  # デフォルトプロンプトを表示
  ```

#### 3. **プロンプト追加**
```bash
python prompts.py add <プロンプト名> <プロンプトテキスト>
```
- **種類**: データ追加コマンド
- **説明**: 新しいプロンプトを一時的に追加します（ファイルには保存されません）
- **引数**: 
  - `<プロンプト名>` (必須): 追加するプロンプトの名前（英数字とアンダースコアのみ）
  - `<プロンプトテキスト>` (必須): プロンプトの内容
- **例**: 
  ```bash
  python prompts.py add my_prompt "フレームを解析してください"
  ```
- **注意**: この方法で追加したプロンプトは一時的なもので、ファイルには保存されません。永続的に使用する場合は`prompts.py`を直接編集してください。

---

### 🎬 動画解析コマンド

動画ファイルを解析してタイムラインJSONを生成するコマンドです。

#### 4. **Geminiを使用した動画解析**
```bash
python analyze_video_gemini.py <動画ファイル>
```
- **種類**: 解析コマンド
- **説明**: Gemini APIを使用して動画を解析し、4DX効果のタイムラインJSONを生成します
- **引数**: 
  - `<動画ファイル>` (必須): 解析する動画ファイルのパスまたはファイル名
- **例**: 
  ```bash
  python analyze_video_gemini.py demo用動画案１.mp4
  python analyze_video_gemini.py videos/マイクラ.mp4
  ```
- **出力**: `results/<動画名>_timeline.json`

#### 5. **利用可能なGeminiモデル一覧表示**
```bash
python analyze_video_gemini.py --list-models
```
- **種類**: 情報表示コマンド
- **説明**: 利用可能なGeminiモデルの一覧を表示します
- **用途**: 使用するモデルを確認する際に使用

#### 6. **利用可能なプロンプト一覧表示**
```bash
python analyze_video_gemini.py --list-prompts
```
- **種類**: 情報表示コマンド
- **説明**: 利用可能なプロンプトの一覧を表示します
- **用途**: 使用するプロンプトを確認する際に使用

#### 7. **OpenAIを使用した動画解析**
```bash
python analyze_video.py <動画ファイル>
```
- **種類**: 解析コマンド
- **説明**: OpenAI APIを使用して動画を解析し、4DX効果のタイムラインJSONを生成します
- **引数**: 
  - `<動画ファイル>` (必須): 解析する動画ファイルのパスまたはファイル名
- **例**: 
  ```bash
  python analyze_video.py demo用動画案１.mp4
  ```

---

### ▶️ 動画再生コマンド

解析済みの動画を再生しながら4DX効果を発動するコマンドです。

#### 8. **動画再生（4DX効果付き）**
```bash
python playback_video.py <動画ファイル>
```
- **種類**: 再生コマンド
- **説明**: 解析済みの動画を再生しながら、タイムラインJSONに基づいて4DX効果を発動します
- **引数**: 
  - `<動画ファイル>` (必須): 再生する動画ファイルのパスまたはファイル名
- **前提条件**: 対応するタイムラインJSONファイル（`results/<動画名>_timeline.json`）が存在する必要があります
- **例**: 
  ```bash
  python playback_video.py demo用動画案１.mp4
  ```

---

### 📺 YouTube動画処理コマンド (`youtube_scene_processor`)

YouTube動画を処理するためのコマンドです。

#### 9. **統合メニュー起動**
```bash
python main.py
```
- **種類**: 対話型コマンド
- **説明**: 対話型メニューを表示し、解析モードと再生モードを選択できます
- **機能**: 
  - YouTube URLの入力（デフォルトURLも使用可能）
  - 解析モード（1）の実行
  - 視聴用再生モード（2）の実行
- **例**: 
  ```bash
  python main.py
  # → URL入力 → モード選択（1または2）
  ```

#### 10. **YouTube動画解析**
```bash
python analyze_video.py [YouTube URL]
```
- **種類**: 解析コマンド
- **説明**: YouTube動画をダウンロードして解析し、タイムラインJSONを生成します
- **引数**: 
  - `[YouTube URL]` (オプション): 解析するYouTube動画のURL。省略時はコード内のデフォルトURLを使用
- **例**: 
  ```bash
  python analyze_video.py "https://youtu.be/YOUR_VIDEO_ID"
  python analyze_video.py  # デフォルトURLを使用
  ```

#### 11. **YouTube動画再生（4DX効果付き）**
```bash
python playback_video.py [YouTube URL]
```
- **種類**: 再生コマンド
- **説明**: YouTube動画を再生しながら、タイムラインJSONに基づいて4DX効果を発動します
- **引数**: 
  - `[YouTube URL]` (オプション): 再生するYouTube動画のURL。省略時はコード内のデフォルトURLを使用
- **前提条件**: 対応するタイムラインJSONファイルが存在する必要があります
- **例**: 
  ```bash
  python playback_video.py "https://youtu.be/YOUR_VIDEO_ID"
  python playback_video.py  # デフォルトURLを使用
  ```

---

### 🖥️ システム管理コマンド (`kz_2504/backend/debug/start-4dx-home.sh`)

Raspberry Pi上で4DX@HOMEアプリケーションを管理するコマンドです。

#### 12. **アプリケーション開始**
```bash
./start-4dx-home.sh start [セッションID]
```
- **種類**: システム制御コマンド
- **説明**: 4DX@HOMEアプリケーションを開始します
- **引数**: 
  - `[セッションID]` (オプション): セッションIDを指定
- **例**: 
  ```bash
  ./start-4dx-home.sh start
  ./start-4dx-home.sh start session_demo123
  ```

#### 13. **アプリケーション停止**
```bash
./start-4dx-home.sh stop
```
- **種類**: システム制御コマンド
- **説明**: 実行中の4DX@HOMEアプリケーションを停止します

#### 14. **アプリケーション再起動**
```bash
./start-4dx-home.sh restart
```
- **種類**: システム制御コマンド
- **説明**: 4DX@HOMEアプリケーションを停止してから再起動します

#### 15. **実行状態確認**
```bash
./start-4dx-home.sh status
```
- **種類**: 情報表示コマンド
- **説明**: アプリケーションの実行状態を確認します

#### 16. **ログ表示**
```bash
./start-4dx-home.sh logs [行数]
```
- **種類**: 情報表示コマンド
- **説明**: アプリケーションのログを表示します
- **引数**: 
  - `[行数]` (オプション): 表示するログの行数（デフォルト: 50行）
- **例**: 
  ```bash
  ./start-4dx-home.sh logs
  ./start-4dx-home.sh logs 100
  ```

---

### 📊 コマンド分類まとめ

| カテゴリ | コマンド数 | 主な用途 |
|---------|----------|---------|
| **プロンプト管理** | 3 | プロンプトの確認・追加 |
| **動画解析** | 4 | 動画ファイルやYouTube動画の解析 |
| **動画再生** | 2 | 解析済み動画の再生と4DX効果発動 |
| **YouTube処理** | 3 | YouTube動画の統合処理 |
| **システム管理** | 5 | Raspberry Piアプリケーションの制御 |
| **合計** | **17** | - |

---

### 💡 よく使うコマンドの組み合わせ

#### 基本的なワークフロー
```bash
# 1. プロンプトを確認
python prompts.py list

# 2. 動画を解析
python analyze_video_gemini.py demo用動画案１.mp4

# 3. 動画を再生（4DX効果付き）
python playback_video.py demo用動画案１.mp4
```

#### YouTube動画の処理
```bash
# 1. 統合メニューから実行（推奨）
python main.py

# または個別に実行
# 2. 解析
python analyze_video.py "https://youtu.be/YOUR_VIDEO_ID"

# 3. 再生
python playback_video.py "https://youtu.be/YOUR_VIDEO_ID"
```

---
